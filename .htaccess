# Root .htaccess for playback
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "https://playback.slughouse.com"
    Header set Access-Control-Allow-Methods "GET, POST, DELETE, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type, x-admin-token"
</IfModule>

# Ensure index.html is served for SPA
DirectoryIndex index.html

# PHP upload limits
php_value upload_max_filesize 25M
php_value post_max_size 26M
php_value max_execution_time 300
php_value max_input_time 300

# Increase script memory if needed
php_value memory_limit 128M

# Hostinger MySQL connection (for PHP backend)
# Do NOT add secrets here. Store DB credentials in server-only files or environment variables.
# Example: create `api/config.php` on the server with DB_HOST/DB_NAME/DB_USER/DB_PASS, or use your
# Hostinger control panel to set environment variables for PHP-FPM.

# Route /api/* to api/index.php
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    # If the root is requested, redirect to the playback subfolder where built site lives
    RewriteCond %{REQUEST_URI} ^/$
    RewriteRule ^$ /playback/ [R=302,L]
    RewriteRule ^api/(.*)$ api/index.php [QSA,L]
</IfModule>

