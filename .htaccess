# Root .htaccess for playback
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "https://playback.slughouse.com"
    Header set Access-Control-Allow-Methods "GET, POST, DELETE, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type, x-admin-token"
</IfModule>

# Ensure index.html is served for SPA
DirectoryIndex index.html

# PHP upload limits
php_value upload_max_filesize 25M
php_value post_max_size 26M
php_value max_execution_time 300
php_value max_input_time 300

# Increase script memory if needed
php_value memory_limit 128M

# Hostinger MySQL connection (for PHP backend)
SetEnv DB_HOST srv995.hstgr.io
SetEnv DB_NAME u792097907_slughouse
SetEnv DB_USER u792097907_tdv
SetEnv DB_PASS ;pC6vaIz

# Route /api/* to api/index.php
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    # If the root is requested, redirect to the playback subfolder where built site lives
    RewriteCond %{REQUEST_URI} ^/$
    RewriteRule ^$ /playback/ [R=302,L]
    RewriteRule ^api/(.*)$ api/index.php [QSA,L]
</IfModule>

